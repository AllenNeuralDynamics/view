instrument_view:
  device_widgets:
      ASI MS-8000 z axis:
        type:   scanning_stage
        driver: view.widgets.device_widgets.stage_widget
        module: StageWidget
        init:
          advanced_user: False
      ASI MS-8000 y axis:
        type: tiling_stage
        driver: view.widgets.device_widgets.stage_widget
        module: StageWidget
        init:
          advanced_user: False
      ASI MS-8000 x axis:
        type:   tiling_stage
        driver: view.widgets.device_widgets.stage_widget
        module: StageWidget
        init:
          advanced_user: False
      tigerbox:
        type: joystick
        driver: view.widgets.device_widgets.joystick_widget
        module: JoystickWidget
        init:
          advanced_user: False
      "488nm":
        type: laser
        driver: view.widgets.device_widgets.laser_widget
        module: LaserWidget
        init:
          color: blue
          advanced_user: False
      "561nm":
        type: laser
        driver: view.widgets.device_widgets.laser_widget
        module: LaserWidget
        init:
          color: green
          advanced_user: False
      "639nm":
        type: laser
        driver: view.widgets.device_widgets.laser_widget
        module: LaserWidget
        init:
          color: red
          advanced_user: True
      ASI FW-1000:
        type: filter_wheel
        driver: view.widgets.device_widgets.filter_wheel_widget
        module: FilterWheelWidget
        init:
          advanced_user: True
      vp-151mx:
        type: camera
        driver: view.widgets.device_widgets.camera_widget
        module: CameraWidget
        init:
          advanced_user: True
      vnp-604mx:
        type: camera
        driver: view.widgets.device_widgets.camera_widget
        module: CameraWidget
        init:
          advanced_user: True
      PCIe-6738:
        type: daq
        driver: view.widgets.device_widgets.ni_widget
        module: NIWidget
        init:
            advanced_user: True
            exposed_branches:
              tasks.ao_task.ports.tunable lens:
                parameters.amplitude_volts.channels:
                      "488": 1.0
                      "561": 1.0
                      "639": 1.0
              tasks.ao_task.ports.x galvo mirror:
                parameters:
                  amplitude_volts:
                    channels:
                      "488": 1.0
                      "561": 1.0
                      "639": 1.0
                  offset_volts:
                    channels:
                      "488": 2.5
                      "561": 2.5
acquisition_view:
  operation_widgets:
    volume_widget:
      init:
        fov_dimensions: [ 0.686592, 0.686592 ]
        coordinate_plane: [ '-x', 'y', 'z' ]
        unit: 'mm'
        settings:
          cameras: [binning]
          lasers: [power_setpoint_mw]
          filter_wheels: [filter]

  # TODO: I don't know if this is the best organization for this
  data_acquisition_tasks:
    PCIe-6738:
      tasks:
        ao_task:
          name: ao task
          timing:
            trigger_mode: on
            trigger_polarity: rising
            trigger_port: PFI0
            retriggerable: on
            sample_mode: finite
            period_time_ms: 500
            rest_time_ms: 50
            sampling_frequency_hz: 10000
          ports:
            camera:
              port: ao0
              device_min_volts: 0.0
              device_max_volts: 5.0
              waveform: sawtooth
              parameters:
                start_time_ms:
                  channels:
                    "488": 10.0
                    "561": 10.0
                end_time_ms:
                  channels:
                    "488": 400.0
                    "561": 400.0
                amplitude_volts:
                  channels:
                    "488": 1.0
                    "561": 1.0
                offset_volts:
                  channels:
                    "488": 2.5
                    "561": 2.5
                cutoff_frequency_hz:
                  channels:
                    "488": 200
                    "561": 200
            x galvo mirror:
              port: ao3
              device_min_volts: 0.0
              device_max_volts: 5.0
              waveform: sawtooth
              parameters:
                start_time_ms:
                  channels:
                    "488": 10.0
                    "561": 10.0
                end_time_ms:
                  channels:
                    "488": 400.0
                    "561": 400.0
                amplitude_volts:
                  channels:
                    "488": 0.0
                    "561": 0.0
                offset_volts:
                  channels:
                    "488": 2.5
                    "561": 2.5
                cutoff_frequency_hz:
                  channels:
                    "488": 200
                    "561": 200
            y galvo mirror:
              port: ao21
              device_min_volts: 0.0
              device_max_volts: 5.0
              waveform: sawtooth
              parameters:
                start_time_ms:
                  channels:
                    "488": 10.0
                    "561": 10.0
                end_time_ms:
                  channels:
                    "488": 400.0
                    "561": 400.0
                amplitude_volts:
                  channels:
                    "488": 0.0
                    "561": 0.0
                offset_volts:
                  channels:
                    "488": 2.5
                    "561": 2.5
                cutoff_frequency_hz:
                  channels:
                    "488": 200
                    "561": 200
            voice box:
              port: ao2
              device_min_volts: 0.0
              device_max_volts: 5.0
              waveform: sawtooth
              parameters:
                start_time_ms:
                  channels:
                    "488": 10.0
                    "561": 10.0
                end_time_ms:
                  channels:
                    "488": 400.0
                    "561": 400.0
                amplitude_volts:
                  channels:
                    "488": 1.0
                    "561": 1.0
                offset_volts:
                  channels:
                    "488": 1.01
                    "561": 1.01
                cutoff_frequency_hz:
                  channels:
                    "488": 200
                    "561": 200
            488_laser:
              port: ao4
              device_min_volts: 0.0
              device_max_volts: 5.0
              waveform: square wave
              parameters:
                start_time_ms:
                  channels:
                    "488": 10.0
                    "561": 10.0
                end_time_ms:
                  channels:
                    "488": 400.0
                    "561": 400.0
                max_volts:
                  channels:
                    "488": 5.0
                    "561": 5.0
                min_volts:
                  channels:
                    "488": 0.0
                    "561": 0.0
      #                      561_laser:
      #                        port: ao1
      #                        device_min_volts: 0.0
      #                        device_max_volts: 5.0
      #                        waveform: square wave
      #                        parameters:
      #                          start_time_ms:
      #                            channels:
      #                              "488": 10.0
      #                              "561": 10.0
      #                          end_time_ms:
      #                            channels:
      #                              "488": 400.0
      #                              "561": 400.0
      #                          max_volts:
      #                            channels:
      #                              "488": 5.0
      #                              "561": 5.0
      #                          min_volts:
      #                            channels:
      #                              "488": 0.0
      #                              "561": 0.0
  #        co_task:
  #            name: ci task
  #            timing:
  #                output_port: PFI0
  #                frequency_hz: 5.0
  #                trigger_mode: off
  #            counters: [ctr0]
